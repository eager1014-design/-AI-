<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“š í”„ë¡¬í”„íŠ¸ ë§ˆì¼“ - AI BUSAN PROMPT LAB</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="lab/style.css">
    <style>
        /* í”„ë¡¬í”„íŠ¸ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
        .prompts-hero {
            min-height: 70vh;
            background: linear-gradient(135deg, rgba(10, 10, 15, 0.98) 0%, rgba(5, 5, 8, 1) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .prompts-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 50%, rgba(102, 126, 234, 0.2) 0%, transparent 60%),
                        radial-gradient(circle at 70% 30%, rgba(240, 147, 251, 0.15) 0%, transparent 50%);
        }
        
        .prompts-hero-content {
            text-align: center;
            position: relative;
            z-index: 2;
            max-width: 1200px;
            padding: 0 40px;
        }
        
        .free-badge {
            display: inline-block;
            padding: 12px 35px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 25px;
            animation: pulse-free 2s infinite;
            box-shadow: 0 0 40px rgba(16, 185, 129, 0.6);
            letter-spacing: 0.5px;
        }
        
        @keyframes pulse-free {
            0%, 100% { transform: scale(1); box-shadow: 0 0 30px rgba(16, 185, 129, 0.5); }
            50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(16, 185, 129, 0.8); }
        }
        
        .prompts-container {
            background: var(--darker);
        }
        
        .prompts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 35px;
            max-width: 1600px;
            margin: 0 auto;
            padding: 100px 40px;
        }
        
        .prompt-card-luxury {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(240, 147, 251, 0.05) 100%);
            border: 2px solid rgba(102, 126, 234, 0.25);
            border-radius: 28px;
            padding: 40px;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .prompt-card-luxury::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(240, 147, 251, 0.15) 100%);
            opacity: 0;
            transition: all 0.6s ease;
            transform: rotate(45deg);
        }
        
        .prompt-card-luxury:hover::before {
            opacity: 1;
        }
        
        .prompt-card-luxury:hover {
            transform: translateY(-20px) scale(1.03) rotateX(2deg);
            border-color: var(--accent);
            box-shadow: 0 35px 80px rgba(102, 126, 234, 0.5),
                        0 0 50px rgba(240, 147, 251, 0.3);
        }
        
        .prompt-icon-large {
            font-size: 3.8rem;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
            filter: drop-shadow(0 5px 15px rgba(102, 126, 234, 0.4));
            transition: transform 0.3s ease;
        }
        
        .prompt-card-luxury:hover .prompt-icon-large {
            transform: scale(1.1) rotateY(15deg);
        }
        
        .prompt-title-luxury {
            font-size: 1.4rem;
            font-weight: 900;
            margin-bottom: 18px;
            background: linear-gradient(135deg, #667eea 0%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 1;
            letter-spacing: -0.3px;
        }
        
        .prompt-desc-luxury {
            font-size: 0.9rem;
            color: var(--text-muted);
            line-height: 1.9;
            margin-bottom: 28px;
            position: relative;
            z-index: 1;
        }
        
        .prompt-stats-luxury {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(102, 126, 234, 0.2);
            position: relative;
            z-index: 1;
        }
        
        .stat-item-luxury {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        .free-tag {
            padding: 8px 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 25px;
            font-size: 0.75rem;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }
        
        .prompt-cta-luxury {
            width: 100%;
            padding: 18px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 18px;
            font-size: 0.9rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            z-index: 1;
        }
        
        .prompt-cta-luxury:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
        }
        
        @media (max-width: 768px) {
            .prompts-grid {
                grid-template-columns: 1fr;
                padding: 40px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Cursor Effects -->
    <div class="cursor-follower"></div>
    <div class="cursor-glow"></div>
    <canvas id="particleCanvas"></canvas>

    <!-- Navigation -->
    <nav class="luxury-nav">
        <div class="nav-logo" onclick="location.href='/'" style="display: flex; align-items: center; gap: 12px; cursor: pointer;">
            <img src="/ai-busan-logo-round.png" alt="AI BUSAN" style="height: 60px; width: 60px; border-radius: 50%; object-fit: cover;">
            <span style="font-weight: 900; font-size: 1.3rem;">AI BUSAN</span>
        </div>
        <div class="nav-menu">
            <a href="/">í™ˆ</a>
            <a href="/membership-guide.html">íšŒì›ì œ</a>
            <a href="/prompts.html">í”„ë¡¬í”„íŠ¸</a>
        </div>
    </nav>

    <!-- HERO -->
    <section class="prompts-hero">
        <div class="prompts-hero-content">
            <div class="free-badge">âœ¨ íšŒì› ë“±ê¸‰ì— ë”°ë¼ í”„ë¡¬í”„íŠ¸ê°€ ì œê³µë©ë‹ˆë‹¤!</div>
            <h1 class="hero-title">
                AI í”„ë¡¬í”„íŠ¸<br>
                <span class="gradient-text-animated">ë“±ê¸‰ë³„ ë¬´ë£Œ ì œê³µ</span>
            </h1>
            <p class="hero-subtitle" style="font-size: 0.9rem; max-width: 700px; margin: 20px auto;">
                <strong>ëŒ€ê¸°ììš© í”„ë¡¬í”„íŠ¸</strong>ëŠ” ëª¨ë“  íšŒì›ì—ê²Œ ë¬´ë£Œ ì œê³µ!<br>
                <strong>ì‹¤í—˜ì²´</strong>ì™€ <strong>ì¡¸ì—…ìƒ</strong>ì€ ì¶”ê°€ í”„ë¡¬í”„íŠ¸ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                ì§€ê¸ˆ ë°”ë¡œ ê°€ì…í•˜ê³  AI ìƒì‚°ì„±ì„ 10ë°° ë†’ì´ì„¸ìš”!
            </p>
        </div>
    </section>

    <!-- PROMPTS GRID -->
    <section class="prompts-container">
        <div class="prompts-grid" id="promptsGrid">
            <!-- í”„ë¡¬í”„íŠ¸ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>
    </section>

    <!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
    <div id="registerModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); z-index: 10000; align-items: center; justify-content: center; padding: 1rem;">
        <div style="background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border-radius: 24px; padding: 3rem; max-width: 500px; width: 100%; box-shadow: 0 20px 60px rgba(102, 126, 234, 0.3); position: relative; border: 2px solid rgba(102, 126, 234, 0.1);">
            <button onclick="closeRegisterModal()" style="position: absolute; top: 1.5rem; right: 1.5rem; background: none; border: none; font-size: 2rem; color: #94a3b8; cursor: pointer; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.3s;">Ã—</button>
            
            <div style="text-align: center; margin-bottom: 2rem;">
                <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; margin: 0 auto 1.5rem; display: flex; align-items: center; justify-content: center; font-size: 3rem; box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);">ğŸ’‘</div>
                <h2 style="font-size: 2rem; font-weight: 900; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem;">AI BUSAN ê°€ì…</h2>
                <p style="color: #64748b; font-size: 1rem; line-height: 1.6;">ê°„ë‹¨í•œ ì •ë³´ ì…ë ¥ í›„ <strong>ëª¨ë“  í”„ë¡¬í”„íŠ¸ ë¬´ë£Œ</strong>ë¡œ ì‚¬ìš©í•˜ì„¸ìš”!</p>
            </div>

            <form id="registerForm" onsubmit="handleRegister(event)" style="display: flex; flex-direction: column; gap: 1.5rem;">
                <div>
                    <label style="display: block; font-weight: 700; color: #334155; margin-bottom: 0.5rem; font-size: 0.95rem;">ğŸ‘¤ ì´ë¦„</label>
                    <input type="text" id="registerName" placeholder="í™ê¸¸ë™" required style="width: 100%; padding: 1rem 1.25rem; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 1rem; transition: all 0.3s; background: white;">
                </div>

                <div>
                    <label style="display: block; font-weight: 700; color: #334155; margin-bottom: 0.5rem; font-size: 0.95rem;">ğŸ“… ì¶œìƒë…„ë„</label>
                    <input type="number" id="registerAge" placeholder="1990" min="1900" max="2024" required style="width: 100%; padding: 1rem 1.25rem; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 1rem; transition: all 0.3s; background: white;">
                    <div style="color: #94a3b8; font-size: 0.875rem; margin-top: 0.5rem;">ì˜ˆ: 1990</div>
                </div>

                <div>
                    <label style="display: block; font-weight: 700; color: #334155; margin-bottom: 0.5rem; font-size: 0.95rem;">ğŸ“ ì „í™”ë²ˆí˜¸</label>
                    <input 
                        type="tel" 
                        id="registerPhone" 
                        placeholder="010-1234-5678" 
                        maxlength="13" 
                        inputmode="numeric"
                        oninput="formatPhoneNumber(this)"
                        onpaste="setTimeout(() => formatPhoneNumber(this), 10)"
                        required 
                        style="width: 100%; padding: 1rem 1.25rem; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 1rem; transition: all 0.3s; background: white;">
                    <div style="color: #94a3b8; font-size: 0.875rem; margin-top: 0.5rem;">ìˆ«ìë§Œ ì…ë ¥í•˜ì„¸ìš” (ìë™ìœ¼ë¡œ - ì¶”ê°€ë©ë‹ˆë‹¤)</div>
                </div>

                <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde047 100%); padding: 1.25rem; border-radius: 12px; border-left: 4px solid #fbbf24;">
                    <div style="font-weight: 700; color: #92400e; margin-bottom: 0.5rem; font-size: 1rem;">ğŸ ê°€ì… í˜œíƒ</div>
                    <ul style="color: #78350f; font-size: 0.9rem; line-height: 1.8; margin: 0; padding-left: 1.25rem;">
                        <li>ì „ì²´ í”„ë¡¬í”„íŠ¸ ë¬´ì œí•œ ë¬´ë£Œ ì—´ëŒ</li>
                        <li>Hard Core ì§„ë‹¨ í”„ë¡¬í”„íŠ¸ ì œê³µ</li>
                        <li>ì¹´ì¹´ì˜¤í†¡ ì†Œëª¨ì„ ì…ì¥ ê°€ëŠ¥</li>
                    </ul>
                </div>

                <button type="submit" style="width: 100%; padding: 1.25rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; font-size: 1.125rem; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);">âœ¨ ê°€ì…í•˜ê³  ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸°</button>
            </form>
        </div>
    </div>

    <script src="lab/script.js"></script>
    <script src="prompts-data.js"></script>
    <script>
        // ì „í™”ë²ˆí˜¸ í¬ë§·íŒ… í•¨ìˆ˜ (ì „ì—­)
        function formatPhoneNumber(input) {
            // ìˆ«ìë§Œ ì¶”ì¶œ
            let value = input.value.replace(/[^0-9]/g, '');
            let formatted = '';
            
            // í¬ë§·íŒ…
            if (value.length <= 3) {
                formatted = value;
            } else if (value.length <= 7) {
                formatted = value.slice(0, 3) + '-' + value.slice(3);
            } else if (value.length <= 11) {
                formatted = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7);
            } else {
                // 11ìë¦¬ ì´ˆê³¼ ì‹œ ìë¥´ê¸°
                formatted = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
            }
            
            input.value = formatted;
        }

        // í”„ë¡¬í”„íŠ¸ ë°ì´í„° ë Œë”ë§
        function renderPrompts() {
            const grid = document.getElementById('promptsGrid');
            const isLoggedIn = !!localStorage.getItem('auth_token');
            const userInfo = localStorage.getItem('user_info');
            let userGrade = 'waitlist'; // ê¸°ë³¸ê°’
            
            if (userInfo) {
                const user = JSON.parse(userInfo);
                userGrade = user.memberGrade || 'waitlist';
            }
            
            if (!promptsData || promptsData.length === 0) {
                grid.innerHTML = '<div style="text-align: center; padding: 80px 20px; color: var(--text-muted); font-size: 1.2rem;">í”„ë¡¬í”„íŠ¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
                return;
            }
            
            // ë“±ê¸‰ í‘œì‹œ í•¨ìˆ˜
            const getGradeBadge = (requiredGrade) => {
                const gradeConfig = {
                    'waitlist': { label: 'ëŒ€ê¸°ììš©', color: '#94a3b8' },
                    'experimenter': { label: 'ì‹¤í—˜ì²´ ì „ìš©', color: '#fbbf24' },
                    'graduate': { label: 'ì¡¸ì—…ìƒ ì „ìš©', color: '#10b981' }
                };
                const config = gradeConfig[requiredGrade] || gradeConfig['waitlist'];
                return `<span style="background: ${config.color}; color: white; padding: 4px 12px; border-radius: 12px; font-size: 0.75rem; font-weight: 700;">${config.label}</span>`;
            };
            
            // í”„ë¡¬í”„íŠ¸ ë°ì´í„° ê°ê°ì— ë“±ê¸‰ í• ë‹¹ (ê¸°ë³¸ ëª¨ë‘ ëŒ€ê¸°ììš©)
            promptsData.forEach((prompt, index) => {
                if (!prompt.requiredGrade) {
                    prompt.requiredGrade = 'waitlist'; // ëª¨ë‘ ëŒ€ê¸°ììš©ìœ¼ë¡œ ì„¤ì •
                }
            });
            
            grid.innerHTML = promptsData.map(prompt => {
                const requiredGrade = prompt.requiredGrade || 'waitlist';
                const canAccess = isLoggedIn && (
                    userGrade === 'graduate' || // ì¡¸ì—…ìƒì€ ëª¨ë“  í”„ë¡¬í”„íŠ¸ ì ‘ê·¼ ê°€ëŠ¥
                    userGrade === requiredGrade || // í•´ë‹¹ ë“±ê¸‰ í”„ë¡¬í”„íŠ¸ ì ‘ê·¼ ê°€ëŠ¥
                    (userGrade === 'experimenter' && requiredGrade !== 'graduate') // ì‹¤í—˜ì²´ëŠ” ëŒ€ê¸°ì+ì‹¤í—˜ì²´ ì ‘ê·¼ ê°€ëŠ¥
                );
                
                return `
                <div class="prompt-card-luxury" onclick="openPromptModal(${prompt.id})">
                    <div class="prompt-icon-large">${prompt.icon}</div>
                    ${getGradeBadge(requiredGrade)}
                    <h3 class="prompt-title-luxury">${prompt.title}</h3>
                    <p class="prompt-desc-luxury">${prompt.description}</p>
                    <div class="prompt-stats-luxury">
                        <div class="stat-item-luxury">â­ ${prompt.rating || 4.9}</div>
                        <div class="stat-item-luxury">ğŸ‘¥ ${prompt.userCount || 1247}ëª…</div>
                        <div class="free-tag">ë¬´ë£Œ</div>
                    </div>
                    <button class="prompt-cta-luxury">
                        ${!isLoggedIn ? 'ğŸ¯ íšŒì›ê°€ì…í•˜ê³  ë¬´ë£Œë¡œ ë³´ê¸°' : 
                          canAccess ? 'ğŸ“‹ í”„ë¡¬í”„íŠ¸ ë³´ê¸°' : 'ğŸ”’ ë“±ê¸‰ ì—…ê·¸ë ˆì´ë“œ í•„ìš”'}
                    </button>
                </div>
            `;
            }).join('');
        }
        
        // í”„ë¡¬í”„íŠ¸ ëª¨ë‹¬ ì—´ê¸°
        function openPromptModal(promptId) {
            const isLoggedIn = !!localStorage.getItem('auth_token');
            const userInfo = localStorage.getItem('user_info');
            const prompt = promptsData.find(p => p.id === promptId);
            
            if (!prompt) return;
            
            if (!isLoggedIn) {
                showRegisterModal();
                return;
            }
            
            // ë“±ê¸‰ í™•ì¸
            const user = JSON.parse(userInfo);
            const userGrade = user.memberGrade || 'waitlist';
            const requiredGrade = prompt.requiredGrade || 'waitlist';
            
            // ì ‘ê·¼ ê¶Œí•œ í™•ì¸
            const canAccess = (
                userGrade === 'graduate' || // ì¡¸ì—…ìƒì€ ëª¨ë“  í”„ë¡¬í”„íŠ¸ ì ‘ê·¼ ê°€ëŠ¥
                userGrade === requiredGrade || // í•´ë‹¹ ë“±ê¸‰ í”„ë¡¬í”„íŠ¸ ì ‘ê·¼ ê°€ëŠ¥
                (userGrade === 'experimenter' && requiredGrade !== 'graduate') // ì‹¤í—˜ì²´ëŠ” ëŒ€ê¸°ì+ì‹¤í—˜ì²´ ì ‘ê·¼ ê°€ëŠ¥
            );
            
            if (!canAccess) {
                alert(
                    `ğŸ”’ ë“±ê¸‰ ì—…ê·¸ë ˆì´ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤!\n\n` +
                    `í˜„ì¬ ë“±ê¸‰: ${user.gradeLabel || 'ëŒ€ê¸°ì'}\n` +
                    `í•„ìš” ë“±ê¸‰: ${requiredGrade === 'experimenter' ? 'ì‹¤í—˜ì²´' : requiredGrade === 'graduate' ? 'ì¡¸ì—…ìƒ' : 'ëŒ€ê¸°ì'}\n\n` +
                    `ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ê±°ë‚˜ ì˜¤í”ˆì±„íŒ…ë°©ì—ì„œ ë“±ê¸‰ ì—…ê·¸ë ˆì´ë“œë¥¼ ìš”ì²­í•˜ì„¸ìš”!`
                );
                return;
            }
            
            // ë¡œê·¸ì¸ ì‹œ í”„ë¡¬í”„íŠ¸ ë‚´ìš© í‘œì‹œ
            alert(`ğŸ“‹ í”„ë¡¬í”„íŠ¸: ${prompt.title}\n\n${prompt.content || prompt.description}\n\nâœ… ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!`);
            
            if (prompt.content) {
                navigator.clipboard.writeText(prompt.content);
            }
        }
        
        // íšŒì›ê°€ì… ëª¨ë‹¬
        function showRegisterModal() {
            document.getElementById('registerModal').style.display = 'flex';
        }

        function closeRegisterModal() {
            document.getElementById('registerModal').style.display = 'none';
            document.getElementById('registerForm').reset();
        }

        // ğŸ”‘ ì†Œëª¨ì„ ì¸ì¦ í™•ì¸
        function checkSomoimAuth() {
            const urlParams = new URLSearchParams(window.location.search);
            const somoimRef = urlParams.get('ref');
            const somoimId = urlParams.get('somoim_id');
            
            // ì†Œëª¨ì„ì—ì„œ ì˜¨ ê²½ìš° ì„¸ì…˜ì— ì €ì¥
            if (somoimRef === 'somoim' || somoimId) {
                sessionStorage.setItem('somoim_verified', 'true');
                sessionStorage.setItem('somoim_id', somoimId || 'direct');
                sessionStorage.setItem('somoim_timestamp', Date.now());
                
                // URL íŒŒë¼ë¯¸í„° ì œê±°
                const cleanUrl = window.location.origin + window.location.pathname;
                window.history.replaceState({}, document.title, cleanUrl);
            }
            
            // ì¸ì¦ ìƒíƒœ í™•ì¸ (24ì‹œê°„ ìœ íš¨)
            const verified = sessionStorage.getItem('somoim_verified');
            const timestamp = parseInt(sessionStorage.getItem('somoim_timestamp') || '0');
            const now = Date.now();
            const validDuration = 24 * 60 * 60 * 1000; // 24ì‹œê°„
            
            if (verified === 'true' && (now - timestamp < validDuration)) {
                return true;
            }
            
            return false;
        }

        async function handleRegister(event) {
            event.preventDefault();
            
            const name = document.getElementById('registerName').value.trim();
            const birthYear = document.getElementById('registerAge').value.trim();
            const phone = document.getElementById('registerPhone').value.trim();
            
            if (!name || !birthYear || !phone) {
                alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì¶œìƒë…„ë„ ìœ íš¨ì„± ê²€ì¦
            const currentYear = new Date().getFullYear();
            const birthYearNum = parseInt(birthYear);
            if (birthYearNum < 1900 || birthYearNum > currentYear) {
                alert(`ì¶œìƒë…„ë„ëŠ” 1900ë…„ë¶€í„° ${currentYear}ë…„ ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.`);
                return;
            }

            // ì¶œìƒë…„ë„ë¡œ ë‚˜ì´ ê³„ì‚°
            const age = currentYear - birthYearNum;

            const phoneRegex = /^[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}$/;
            if (!phoneRegex.test(phone)) {
                alert('ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.\nì˜ˆì‹œ: 010-1234-5678');
                return;
            }

            // ì‚¬ìš©ì ì •ë³´ ìƒì„±
            const user = {
                id: Date.now(),
                name: name,
                age: parseInt(age),
                birthYear: parseInt(birthYear),
                phone: phone,
                email: `${phone.replace(/-/g, '')}@jinbubu.local`,
                password: btoa('jinbubu1234'), // ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸
                createdAt: new Date().toISOString(),
                hasFullAccess: true,
                somoimVerified: true,
                memberGrade: 'waitlist',
                gradeLabel: 'ëŒ€ê¸°ì',
                isVIP: false
            };

            // ì „ì²´ ì‚¬ìš©ì ëª©ë¡ì— ì¶”ê°€
            const existingUsers = JSON.parse(localStorage.getItem('all_users') || '[]');
            existingUsers.push(user);
            localStorage.setItem('all_users', JSON.stringify(existingUsers));

            localStorage.setItem('auth_token', `token_${user.id}`);
            localStorage.setItem('user_info', JSON.stringify(user));
            
            closeRegisterModal();
            renderPrompts();
            
            // ì„±ê³µ ì•Œë¦¼ ë° ì˜¤í”ˆ ì±„íŒ…ë°© ì•ˆë‚´
            const goToKakao = confirm(
                `ğŸ‰ í™˜ì˜í•©ë‹ˆë‹¤, ${name}ë‹˜!\n\n` +
                `âœ… ëŒ€ê¸°ìë¡œ ê°€ì…ë˜ì—ˆìŠµë‹ˆë‹¤.\n` +
                `âœ… ëŒ€ê¸°ììš© í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n` +
                `ğŸ”¥ VIP ì‹¤í—˜ì²´ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\n` +
                `[í™•ì¸] í´ë¦­ ì‹œ ì˜¤í”ˆ ì±„íŒ…ë°©ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.`
            );
            
            if (goToKakao) {
                // ìƒˆ íƒ­ì—ì„œ ì˜¤í”ˆ ì±„íŒ…ë°© ì—´ê¸°
                window.open('https://open.kakao.com/o/gw6HE99g', '_blank');
            }
        }

        document.getElementById('registerModal').addEventListener('click', (e) => {
            if (e.target.id === 'registerModal') {
                closeRegisterModal();
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë Œë”ë§
        document.addEventListener('DOMContentLoaded', () => {
            // í”„ë¡¬í”„íŠ¸ ë Œë”ë§
            renderPrompts();
            
            // ì „í™”ë²ˆí˜¸ ìë™ í•˜ì´í”ˆ ì¶”ê°€
            const phoneInput = document.getElementById('registerPhone');
            if (phoneInput) {
                phoneInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/[^0-9]/g, ''); // ìˆ«ìë§Œ ì¶”ì¶œ
                    let formatted = '';
                    
                    if (value.length <= 3) {
                        formatted = value;
                    } else if (value.length <= 7) {
                        formatted = value.slice(0, 3) + '-' + value.slice(3);
                    } else if (value.length <= 11) {
                        formatted = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7);
                    } else {
                        formatted = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
                    }
                    
                    e.target.value = formatted;
                });
                
                // ë¶™ì—¬ë„£ê¸° ì²˜ë¦¬
                phoneInput.addEventListener('paste', function(e) {
                    setTimeout(() => {
                        let value = e.target.value.replace(/[^0-9]/g, '');
                        let formatted = '';
                        
                        if (value.length <= 3) {
                            formatted = value;
                        } else if (value.length <= 7) {
                            formatted = value.slice(0, 3) + '-' + value.slice(3);
                        } else if (value.length <= 11) {
                            formatted = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7);
                        } else {
                            formatted = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
                        }
                        
                        e.target.value = formatted;
                    }, 10);
                });
            }
        });
    </script>
</body>
</html>
