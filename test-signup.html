<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial; padding: 40px; background: #f0f0f0; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        h1 { color: #333; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        button { width: 100%; padding: 15px; background: #667eea; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; }
        button:hover { background: #5568d3; }
        .status { margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px; }
        .users-list { margin-top: 30px; }
        .user-item { padding: 10px; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸</h1>
        
        <form id="testForm">
            <div class="form-group">
                <label>ì´ë¦„</label>
                <input type="text" id="name" value="í…ŒìŠ¤íŠ¸ìœ ì €" required>
            </div>
            <div class="form-group">
                <label>ì´ë©”ì¼</label>
                <input type="email" id="email" value="test@example.com" required>
            </div>
            <div class="form-group">
                <label>ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="password" value="test1234" required>
            </div>
            <div class="form-group">
                <label>ì¶œìƒë…„ë„</label>
                <input type="number" id="birthYear" value="1990" required>
            </div>
            <div class="form-group">
                <label>ì „í™”ë²ˆí˜¸</label>
                <input type="text" id="phone" value="010-1234-5678" required>
            </div>
            <button type="submit">íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸</button>
        </form>

        <div class="status" id="status">
            <strong>í˜„ì¬ ì €ì¥ëœ íšŒì› ìˆ˜:</strong> <span id="userCount">0</span>ëª…
        </div>

        <div class="users-list">
            <h3>ì €ì¥ëœ íšŒì› ëª©ë¡</h3>
            <div id="usersList"></div>
        </div>
    </div>

    <script>
        function showUsers() {
            const users = JSON.parse(localStorage.getItem('all_users') || '[]');
            document.getElementById('userCount').textContent = users.length;
            
            const usersList = document.getElementById('usersList');
            if (users.length === 0) {
                usersList.innerHTML = '<p style="color: #999;">ì €ì¥ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
            } else {
                usersList.innerHTML = users.map((user, index) => `
                    <div class="user-item">
                        <strong>${index + 1}. ${user.name}</strong> (${user.email})<br>
                        <small>ë“±ê¸‰: ${user.gradeLabel || 'ëŒ€ê¸°ì'} | ê°€ì…ì¼: ${new Date(user.createdAt).toLocaleString('ko-KR')}</small>
                    </div>
                `).join('');
            }
        }

        document.getElementById('testForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const birthYear = parseInt(document.getElementById('birthYear').value);
            const phone = document.getElementById('phone').value.trim();
            
            const currentYear = new Date().getFullYear();
            const age = currentYear - birthYear;
            
            const existingUsers = JSON.parse(localStorage.getItem('all_users') || '[]');
            
            if (existingUsers.some(u => u.email === email)) {
                alert('ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            
            const user = {
                id: Date.now(),
                name: name,
                email: email,
                password: btoa(password),
                age: age,
                birthYear: birthYear,
                phone: phone,
                createdAt: new Date().toISOString(),
                hasFullAccess: true,
                somoimVerified: true,
                memberGrade: 'waitlist',
                gradeLabel: 'ëŒ€ê¸°ì',
                isVIP: false
            };
            
            existingUsers.push(user);
            localStorage.setItem('all_users', JSON.stringify(existingUsers));
            
            alert(`âœ… ${name}ë‹˜ íšŒì›ê°€ì… ì™„ë£Œ!\n\nall_usersì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            
            showUsers();
            
            // ì´ë©”ì¼ ìë™ ì¦ê°€
            const emailNum = parseInt(email.match(/\d+/) || '0');
            document.getElementById('email').value = `test${emailNum + 1}@example.com`;
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ íšŒì› ëª©ë¡ í‘œì‹œ
        showUsers();
    </script>
</body>
</html>
